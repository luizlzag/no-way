{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  .bento-gallery-{{ section.id }} {
    --grid-gap: {{ section.settings.grid_gap | divided_by: 10.0 }}rem;
    --image-border-radius: {{ section.settings.border_radius }}px;
    --title-color: {{ section.settings.title_color }};
    --subtitle-color: {{ section.settings.subtitle_color }};
    --complement-color: {{ section.settings.complement_color }};
    --grid-row-height: {{ section.settings.row_height }}px;
  }
  .bento-gallery-{{ section.id }} .bento-gallery__grid {
    grid-template-columns: {{ section.settings.large_image_ratio }}fr 1fr;
  }

  .bento-gallery-{{ section.id }} .bento-gallery__grid {
    display: grid;
    gap: var(--grid-gap);
    /* Layout de bento responsivo. Ajuste conforme necessário. */
    grid-auto-rows: var(--grid-row-height);
    grid-template-columns: repeat(2, 1fr);
  }

  @media screen and (min-width: 750px) {
    /* Em desktop, usamos 3 colunas para criar o efeito assimétrico */
    .bento-gallery-{{ section.id }} .bento-gallery__grid {
      grid-template-columns: repeat(3, 1fr);
      grid-auto-rows: var(--grid-row-height);
      grid-auto-flow: dense; /* Permite que o grid preencha os espaços vazios */
    }
  }

  .bento-gallery-{{ section.id }} .bento-gallery__item {
    position: relative;
    overflow: hidden;
    border-radius: var(--image-border-radius);
  }

  /* Padrão de layout assimétrico que se repete a cada 4 itens */
  @media screen and (min-width: 750px) {
    /* Item 1 (Linha 1): Maior */
    .bento-gallery-{{ section.id }} .bento-gallery__item:nth-child(1) {
      grid-column: span 2;
    }
    /* Item 2 (Linha 1): Menor */
    .bento-gallery-{{ section.id }} .bento-gallery__item:nth-child(2) {
      grid-column: span 1;
    }
    /* Item 3 (Linha 2): Menor */
    .bento-gallery-{{ section.id }} .bento-gallery__item:nth-child(3) {
      grid-column: span 1;
    }
    /* Item 4 (Linha 2): Maior */
    .bento-gallery-{{ section.id }} .bento-gallery__item:nth-child(4) {
      grid-column: span 2;
    }
    /* A partir do item 5 (Linha 3), todos serão pequenos */
    .bento-gallery-{{ section.id }} .bento-gallery__item:nth-child(n+5) {
      grid-column: span 1;
    }
  }

  .bento-gallery-{{ section.id }} .bento-gallery__link {
    display: block;
    width: 100%;
    height: 100%;
    text-decoration: none;
  }

  .bento-gallery-{{ section.id }} .bento-gallery__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: var(--image-border-radius);
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .bento-gallery-{{ section.id }} .bento-gallery__item:hover .bento-gallery__image {
    transform: scale(1.05);
  }

  .bento-gallery-{{ section.id }} .bento-gallery__header {
    margin-bottom: 3rem;
    text-align: start;
    display: flex;
    align-items: flex-end;
    gap: 105px;
    align-self: stretch;
  }
  .bento-gallery__title strong{
    font-weight: 700;
    line-height: 120%;
    color: #656E52;
  }

  .bento-gallery-{{ section.id }} .bento-gallery__title {
    color: var(--title-color);
  }

  .bento-gallery-{{ section.id }} .bento-gallery__subtitle {
    text-transform: uppercase;
    color: var(--subtitle-color);
    opacity: 0.3;
  }
  @media screen and (max-width: 749px) {
    .bento-gallery-{{ section.id }} .bento-gallery__header {
      flex-direction: column;
      align-items: flex-start;
      gap: 24px;
    }

    .bento-gallery-{{ section.id }} .bento-gallery__grid {
      grid-auto-rows: 103.618px;
      grid-template-columns: repeat(3, 1fr); /* Usamos 3 colunas para a proporção */
      grid-auto-flow: dense;
    }

    /* Linha 1: Imagem maior (2/3) | Imagem menor (1/3) */
    .bento-gallery-{{ section.id }} .bento-gallery__item:nth-child(4n-3) {
      grid-column: span 2;
    }
    .bento-gallery-{{ section.id }} .bento-gallery__item:nth-child(4n-2) {
      grid-column: span 1;
    }
    /* Linha 2: Imagem menor (1/3) | Imagem maior (2/3) */
    .bento-gallery-{{ section.id }} .bento-gallery__item:nth-child(4n-1) {
      grid-column: span 1;
    }
    .bento-gallery-{{ section.id }} .bento-gallery__item:nth-child(4n) {
      grid-column: span 2;
    }
  }

  .bento-gallery-{{ section.id }} .bento-gallery__complement {
    color: var(--complement-color);
    line-height: 140%;
  }

  .bento-gallery__bottom-link {
    display: flex;
    align-items: center;
    gap: 10px;
    color: currentcolor;
    text-decoration: none;
  }
  .bento-gallery-{{ section.id }} .bento-gallery__bottom-link-wrapper {
    margin-top: 4rem;
    text-align: left;
  }
{%- endstyle -%}

<div class="bento-gallery-{{ section.id }} isolate section-{{ section.id }}-padding page-width">
  <div class="">
    <div class="bento-gallery__header">
        <div class="bento-gallery__header-content">
          {% if section.settings.subtitle_section != blank %}
            <p class="bento-gallery__subtitle">{{ section.settings.subtitle_section }}</p>
          {% endif %}
          {% if section.settings.title_section != blank %}
            <h2 class="bento-gallery__title h2">{{ section.settings.title_section }}</h2>
          {% endif %}
        </div>
     
      <div class="bento-gallery__complement-container">
        {% if section.settings.complement_text != blank %}
          <p class="bento-gallery__complement small-text">{{ section.settings.complement_text }}</p>
        {% endif %} 
      </div>
    </div>

    {%- if section.blocks.size > 0 -%}
      <div class="bento-gallery__grid">
        {%- for block in section.blocks -%}
          <div class="bento-gallery__item" {{ block.shopify_attributes }}>
            <a href="{{ block.settings.img_link | default: '#' }}" class="bento-gallery__link">
              {%- if block.settings.image != blank -%}
                {{
                  block.settings.image
                  | image_url: width: 1200
                  | image_tag: loading: 'lazy', class: 'bento-gallery__image', widths: '200, 400, 600, 800, 1000, 1200'
                }}
              {%- else -%}
                {{ 'image' | placeholder_svg_tag: 'placeholder-svg bento-gallery__image' }}
              {%- endif -%}
            </a>
          </div>
        {%- endfor -%}
      </div>
    {%- endif -%}

    {%- if section.settings.link_text != blank and section.settings.link_url != blank -%}
      <div class="bento-gallery__bottom-link-wrapper">
        <a href="{{ section.settings.link_url }}" class="bento-gallery__bottom-link description">
          {{- section.settings.link_text -}}
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M4.22806 13.7719C3.92398 13.4679 3.92398 12.9748 4.22806 12.6708L11.3414 5.5574L7.34812 5.5576C6.91808 5.55762 6.56945 5.20903 6.56943 4.77899C6.5694 4.34895 6.918 4.00032 7.34804 4.0003L13.2213 4C13.4278 3.99999 13.6259 4.08203 13.7719 4.22806C13.918 4.3741 14 4.57217 14 4.77869L13.9997 10.652C13.9997 11.082 13.6511 11.4306 13.221 11.4306C12.791 11.4306 12.4424 11.0819 12.4424 10.6519L12.4426 6.65858L5.32924 13.7719C5.02516 14.076 4.53215 14.076 4.22806 13.7719Z" fill="#656E52"/>
          </svg>
        </a>
      </div>
    {%- endif -%}
  </div>
</div>


{% schema %}
    {
        "name": "Galeria Bento",
        "settings": [
            {
                "type": "richtext",
                "id": "title_section",
                "label": "Título da seção",
                "default": "<p>Galeria Bento</p>"
            },
            {
                "type": "color",
                "id": "title_color",
                "label": "Cor do título",
                "default": "#121212"
            },
            {
                "type": "text",
                "id": "subtitle_section",
                "label": "Subtítulo da seção"
            },
            {
                "type": "color",
                "id": "subtitle_color",
                "label": "Cor do subtítulo",
                "default": "#3A3A3A"
            },
            {
                "type": "text",
                "id": "complement_text",
                "label": "Texto complementar"
            },
            {
                "type": "color",
                "id": "complement_color",
                "label": "Cor do texto complementar",
                "default": "#5C5C5C"
            },
            {
                "type": "header",
                "content": "Layout da Galeria"
            },
            {
                "type": "range",
                "id": "grid_gap",
                "min": 0,
                "max": 50,
                "step": 2,
                "unit": "px",
                "label": "Espaçamento entre imagens",
                "default": 16
            },
            {
                "type": "range",
                "id": "border_radius",
                "min": 0,
                "max": 50,
                "step": 1,
                "unit": "px",
                "label": "Arredondamento das imagens",
                "default": 12
            },
            {
                "type": "range",
                "id": "row_height",
                "min": 200,
                "max": 600,
                "step": 10,
                "unit": "px",
                "label": "Altura da linha da imagem",
                "default": 360
            },
            {
                "type": "range",
                "id": "large_image_ratio",
                "min": 1.5,
                "max": 3,
                "step": 0.1,
                "label": "Proporção da imagem maior",
                "info": "Define a proporção da imagem maior em relação à menor. Ex: 2.0 significa que a maior é 2x mais larga que a menor.",
                "default": 2.0
            },
            {
                "type": "header",
                "content": "Espaçamento da Seção"
            },
            {
                "type": "range",
                "id": "padding_top",
                "min": 0,
                "max": 100,
                "step": 4,
                "unit": "px",
                "label": "Espaçamento superior",
                "default": 36
            },
            {
                "type": "range",
                "id": "padding_bottom",
                "min": 0,
                "max": 100,
                "step": 4,
                "unit": "px",
                "label": "Espaçamento inferior",
                "default": 36
            },
            {
                "type": "header",
                "content": "Link Inferior"
            },
            {
                "type": "text",
                "id": "link_text",
                "label": "Texto do link",
                "default": "Ver todos os projetos"
            },
            {
                "type": "url",
                "id": "link_url",
                "label": "URL do link"
            }
        ],"blocks": [
            {
                "type": "image",
                "name": "Imagem",
                "settings": [
                    {
                        "type": "image_picker",
                        "id": "image",
                        "label": "Imagem"
                    },
                    {
                        "type": "url",
                        "id": "img_link",
                        "label": "Link da imagem"
                    }
                ]
            }
        ],"presets": [
          {
            "name": "Galeria Bento"
          }
        ]
    }
{% endschema %}
